<html>
<head>
    <title>Systo demo: auto-layout</title>
    <!-- CSS -->
    <link type="text/css" rel="stylesheet" href="jquery-ui.css"/>
    <link type="text/css" rel="stylesheet" href="jquery-ui-1.9.2.custom.css"/>
    <style>
    .ui-front {
        z-index:1000000 !important; /* The default is 100. !important overrides the default. */
    </style>


    <!-- Systo core - defines the SYSTO global variable and some core functions -->
    <script type="text/javascript" src="systo.js"></script>

    <!--script src="http://code.jquery.com/jquery-1.9.1.js"></script-->
    <!--script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script-->
    <script type="text/javascript" src="jquery-1.10.2.js"></script>
    <script type="text/javascript" src="jquery-ui-1.10.3.js"></script>
	<script type="text/javascript" src="jquery.layout-latest.js"></script>
	<script type="text/javascript" src="systo_widgets/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="formatting.js"></script>
    <script type="text/javascript" src="Blob.js"></script>
    <script type="text/javascript" src="FileSaver.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="jquery.xml2json.js"></script>

    <!-- Supplementary Systo code -->
    <!--script type="text/javascript" src="generate_simulation_code_v1.js"></script-->
    <script type="text/javascript" src="simulation.js"></script>
    <script type="text/javascript" src="action.js"></script>
    <script type="text/javascript" src="compact.js"></script>
    <script type="text/javascript" src="equation.js"></script>
    <script type="text/javascript" src="functions.js"></script>
    <script type="text/javascript" src="plugins/codeGenerator/euler1.js"></script>
    <script type="text/javascript" src="plugins/codeGenerator/euler2.js"></script>
    <script type="text/javascript" src="plugins/codeGenerator/rk41.js"></script>
    <script type="text/javascript" src="plugins/codeGenerator/euler1animate.js"></script>

    <!-- A model language definition, held as a Javascript object literal -->
    <script type="text/javascript" src="languages/system_dynamics.js"></script>

    <!-- Model(s), held as a Javascript object literal -->
    <script type="text/javascript" src="models/miniworld.js"></script>

    <!-- The widgets used in this page -->
	<script type="text/javascript" src="systo_widgets/jquery.diagram.js"></script>
	<script type="text/javascript" src="systo_widgets/jquery.auto_layout.js"></script>
	<script type="text/javascript" src="systo_widgets/jquery.equation_listing.js"></script>
	<script type="text/javascript" src="systo_widgets/jquery.dialog_sd_node.js"></script>

    <!-- This page's custom script -->
    <script>
        $(document).ready(function() {
            SYSTO.switchToModel('miniworld');
            $('#diagram1').diagram({modelId:'miniworld', allowEditing:true}).
                resizable();

            $('#dummy3').auto_layout({modelId:'miniworld'});
       });
    </script>
</head>

<body style="font-family:arial,sans-serif;">
    <h3>(Very crude) demonstration of automatic layout of the model diagram</h3>
    <p>In this demo, the starting point is a model diagram which has already been laid out by hand.    This provides a nice comparsion of how well (or how badly...) the automatically-laid-out diagram is compared to the human one.</p>
    <p>However, the main point in having a mechanism for doing this is to enable text-equation models (for example, those obtained by listing out the equations in a Stella, Vensim or Simile model) to be loaded into Systo and rendered as a diagram.    This requires a little more work - the widget has to work out the nodes (variables) and arcs (influence or flow arrows) from the equations - but that's not too difficult.</p>

<p>To see the demo work, simply click on the <b>Layout</b> button.   Wait until you get a message saying that the layout process is complete, then you can click the button again to see a different layout.</p>

<p>Acknowledgements; <a href="http://d3js.org/">d3js</a></p>
    <div id="diagram1" style="float:left; margin:1px; width:700px; height:500px; margin-right:20px; border:solid 1px gray"></div>
    <div id='dummy3'></div>
    <div id="node_dialogs"></div>

    <div id="dialog_sd_node"></div>
</body>
</html>


