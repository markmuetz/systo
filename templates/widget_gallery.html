<html>
    <head>
        <title>Systo widget gallery</title>
        <!-- CSS -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

        <style type="text/css" media="screen">
        .widget_container {
            float:left; 
            border:0px solid blue; 
            background:#f6f6f6;
            margin:7px; 
            width:400px; 
            height:400px;
        }

        .header {
            height:79px;
            margin:0px;
            padding:0px;
        }

        .header h2 {
            float:left;
            margin:0px;
            padding:3px;
        }

        .header a {
            float:right;
            font-size:16px;
            font-weight:bold;
            color:#a00000;
            padding-right:6px;
            text-decoration:none;
        }

        .header p {
            float:left;
            clear:both;
            font-size:14px;
            font-weight:normal;
            color:black;
            margin:0px;
            padding:3px;
        }

        .body {
            border:1px solid #c0c0c0;
            background:white;
            overflow:hidden;
            height:320px;
        }
        </style>

        {% include "systo_core_include.html" %}

        <!-- A model language definition, held as a Javascript object literal -->
        <!--script type="text/javascript" src="/static/js/languages/system_dynamics.js"></script-->
        <script type="text/javascript" src="/static/js/languages/system_dynamics.js"></script>

        <!-- Model(s), held as a Javascript object literal -->
        <script type="text/javascript" src="/static/js/models/miniworld.js"></script>
        <!--script type="text/javascript" src="/static/js/models/miniworld_enum.js"></script-->
        <script type="text/javascript" src="/static/js/models/predator_prey_shodor.js"></script>
        <script type="text/javascript" src="/static/js/models/cascade.js"></script>
        <!--script type="text/javascript" src="/static/js/models/speedy.js"></script-->
        <!--script type="text/javascript" src="/static/js/models/fractal_triangle.js"></script-->
        <!--script type="text/javascript" src="/static/js/models/fractal_fern.js"></script-->
        <!--script type="text/javascript" src="/static/js/models/forest_cover_tipping_point.js"></script-->

        <!-- The widgets used in this page -->
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.audio_plotter.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.dialog_sd_node.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.diagram.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.equation_listing.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.inline_value.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.keypad.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.multiple_sliders.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.phase_plane.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.plotter.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.runcontrol.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.sketchgraph.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.slider1.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.table.js"></script>
	<script type="text/javascript" src="/static/js/systo_widgets/jquery.text_plotter.js"></script>

    </head>

    <body id="body" style="font-family:arial,sans-serif;">
        <h1>Systo widget gallery</h1>
        <p>This page illustrates various widgets that can be used for working with Systo models. Click on the "More" button to go to the page provided for that widget.</p>
        <p>The widgets are displayed here in boxes of the same size purely for reasons of neatness.   In practice, the designer of a web page can set the size, or this can be set automatically by the widget itself; and some widgets can be re-sized by the user.</p>  

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_xxx.html">diagram</a></h2>
                <p>This is the basic widget for displaying, editing and creating a model diagram.  
            </div>
            <div class="body" id="diagram"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_diagram.html">multiple_sliders</a></h2>
                <p>This widget presents 1 or more sliders for model inputs.  The user can set each slider's range.</p>
            </div>
            <div class="body" id="multiple_sliders"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_equation_listing.html">equation_listing</a></h2>
                <p>This widget lists out the model equations</p> 
            </div>
            <div class="body" id="equation_listing"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_plotter.html">plotter</a></h2>
                <p>This is the basic widget for plotting simulation results, as plots against time.</p> 
            </div>
            <div class="body" id="plotter" style="position:relative"></div>
                        <!--div id="plotter" style="position:absolute; top:25px; left:0px; bottom:0px; right:0px; margin:1px; 
                            border:solid 0px white; overflow:hidden;"></div-->
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_audio_plotter.html">audio_plotter</a></h2>
                <p>This widget plays a tone which reflects the value of a variable during the simulation.</p>  
            </div>
            <div class="body" id="audio_plotter"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_text_plotter.html">text_plotter</a></h2>
                <p>This widget displays text summarising the key statistics of a simulation run for a specified variable.</p>
            </div>
            <div class="body" id="text_plotter"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_phase_plane.html">phase_plane</a></h2>
                <p>This widget displays a "phase-plane diagram" - a plot of one variable against another.</p>
            </div>
            <div class="body" id="phase_plane"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_inline_value.html">inline_value</a></h2>
                <p>Unlike most widgets, this one is an inline value (the value in <b>bold</b> shown here): some statistic from a simulation run.</p> 
            </div>
            <div class="body">The final value of Population is <span id="inline_value" style="font-weight:bold;"></span>.</div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_runcontrol.html">runcontrol</a></h2>
                <p>This provides a run control dialog for controlling a simulation - time step, run duration etc.</p>  
            </div>
            <div class="body" id="runcontrol"></div>
        </div>

        <div class="widget_container">
            <div class="header">
                <h2><a href="widget_table.html">table</a></h2>
                <p>This widget tabulates simulation results for selected variables.</p>  
            </div>
            <div class="body" id="table"></div>
        </div>

       <script>

            $(document).ready(function() {

                SYSTO.switchToModel('miniworld');

                $('#plotter').plotter({
                    modelId:'miniworld',
                    allowChangeOfModel: true,
                    canvasWidth:400, 
                    canvasHeight:250,
                    selectNode:function (node) {
                        if (node.type === 'stock') {
                            return true;
                        } else {
                            return false;
                        }
                    }
                });

                $('#audio_plotter').audio_plotter({
                    modelId:'miniworld',
                    includeNodeId: function(nodeId) {
                        var node = SYSTO.models['miniworld'].nodes[nodeId];
                        if (node.type === 'stock') {
                            return true;
                        } else {
                            return false;
                        }
                    }
                });

                $('#text_plotter').text_plotter({modelId:'miniworld'});
                $('#phase_plane').phase_plane({modelId:'miniworld', xnodeId:'stock1', ynodeId:'stock3'});

                $('#diagram').diagram({modelId:'miniworld', allowEditing:false});

                $('#multiple_sliders').multiple_sliders({
                    modelId:'miniworld',
                    selectNode:function (node) {
                        if (node.type === 'stock') {
                            return true;
                        } else {
                            return false;
                        }
                    }
                });

                $('#inline_value').inline_value({modelId:'miniworld', nodeId:'stock1', statistic:'final'});

                $('#equation_listing').equation_listing({modelId:'miniworld'});

                $('#runcontrol').runcontrol({modelId:'miniworld'});

                $('#table').table({modelId:'miniworld', every:5});

                SYSTO.trigger({
                    file:' widget_gallery.html',
                    action: 'page loading',
                    event_type: 'change_model_listener',
                    parameters: {packageId:'package1', oldModelId:'',newModelId:'miniworld'}});
                SYSTO.trigger({
                    file: 'widget_gallery.html',
                    action: 'page loading',
                    event_type: 'display_listener',
                    parameters: {packageId:'package1', modelId:'miniworld'}});


             });
        </script>

    </body>
</html>
